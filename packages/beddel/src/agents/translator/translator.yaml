# Translator Agent - Declarative Genkit-powered translation workflow
# Route: /agents/translator
# Method: translator.execute

agent:
  id: translator
  version: 1.0.0
  protocol: beddel-declarative-protocol/v2.0

metadata:
  name: "Translator Agent"
  description: "Translates text between languages using Gemini Flash via Genkit"
  category: "translation"
  route: "/agents/translator"

schema:
  input:
    type: "object"
    properties:
      text:
        type: "string"
        minLength: 1
        maxLength: 10000
        description: "Original text to be translated"
      source_language:
        type: "string"
        pattern: "^[a-z]{2}$"
        description: "Source language (ISO-639-1, e.g., pt, en)"
      target_language:
        type: "string"
        pattern: "^[a-z]{2}$"
        description: "Target language (ISO-639-1, e.g., en, es)"
    required: ["text", "source_language", "target_language"]

  output:
    type: "object"
    properties:
      translated_text:
        type: "string"
      metadata:
        type: "object"
        properties:
          model_used:
            type: "string"
          processing_time:
            type: "number"
          confidence:
            type: "number"
          supported_languages:
            type: "array"
            items:
              type: "string"
          requested_languages:
            type: "object"
            properties:
              source:
                type: "string"
              target:
                type: "string"
            required: ["source", "target"]
          prompt_used:
            type: "string"
        required:
          [
            "model_used",
            "processing_time",
            "confidence",
            "supported_languages",
            "requested_languages",
            "prompt_used",
          ]
    required: ["translated_text", "metadata"]

logic:
  workflow:
    - name: "translate"
      type: "genkit-translation"
      action:
        type: "translate"
        result: "translationResult"
