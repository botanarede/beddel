# GitMCP Agent - Native Builtin Agent for Beddel Runtime
# Route: /agents/gitmcp
# Method: gitmcp.execute

agent:
  id: gitmcp
  version: 1.0.0
  protocol: beddel-declarative-protocol/v2.0

metadata:
  name: "GitMCP Documentation Agent"
  description: "Fetches and chunks GitHub repository documentation via gitmcp.io MCP servers"
  category: "integration"
  route: "/agents/gitmcp"
  provides_knowledge: true
  tags:
    - "gitmcp"
    - "documentation"
    - "github"
    - "mcp"

schema:
  input:
    type: "object"
    properties:
      gitmcp_url:
        type: "string"
        description: "GitMCP repository URL (e.g., https://gitmcp.io/owner/repo)"
    required: ["gitmcp_url"]

  output:
    type: "object"
    properties:
      success:
        type: "boolean"
      chunks:
        type: "array"
        items:
          type: "string"
        description: "Content split into chunks for vectorization"
      source:
        type: "string"
        description: "Source URL of the fetched content"
      error:
        type: "string"
    required: ["success"]

logic:
  workflow:
    - name: "fetch-content"
      type: "gitmcp"
      action:
        gitmcp_url: "$input.gitmcp_url"
        result: "gitmcpResult"

    - name: "deliver-response"
      type: "output-generator"
      action:
        type: "generate"
        output:
          success: "$gitmcpResult.success"
          chunks: "$gitmcpResult.chunks"
          source: "$gitmcpResult.source"
          error: "$gitmcpResult.error"

output:
  schema:
    success: "$gitmcpResult.success"
    chunks: "$gitmcpResult.chunks"
    source: "$gitmcpResult.source"
    error: "$gitmcpResult.error"
